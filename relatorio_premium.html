<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Relat√≥rio Premium ‚Äî MindKey</title>
<style>
  :root{
    --bg:#f5f7fa; --card:#fff; --accent:#6A4DFF; --accent2:#1ED4C5; --muted:#334155;
    --glass: rgba(11,17,30,0.04);
    --maxw:1000px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,var(--bg),#eef6ff);color:#0b1220}
  .wrap{max-width:var(--maxw);margin:28px auto;padding:18px}
  header{display:flex;justify-content:space-between;align-items:center;gap:12px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
  h1{margin:0;font-size:22px}
  .meta{color:var(--muted);font-size:13px;margin-top:6px}
  details{background:var(--card);padding:16px;border-radius:12px;margin-top:14px;box-shadow:0 6px 18px rgba(16,24,40,0.04);border:1px solid rgba(15,23,42,0.03)}
  summary{font-weight:700;cursor:pointer;outline:none}
  .row{display:flex;gap:12px;align-items:center}
  .badge{display:inline-block;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;font-weight:700}
  .small{color:var(--muted);font-size:14px}
  ul{margin:8px 0 0 18px}
  .code{background:#0b1220;color:#e6ffee;padding:12px;border-radius:8px;white-space:pre-wrap;margin-top:10px;overflow:auto}
  .actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
  .btn{background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
  .btn-outline{background:transparent;border:1px solid rgba(11,17,30,0.06);padding:9px 12px;border-radius:10px;cursor:pointer;color:var(--muted)}
  .grid-4{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:12px}
  .panel{background:linear-gradient(180deg,rgba(106,77,255,0.03),rgba(30,212,197,0.02));padding:12px;border-radius:10px}
  .label{font-size:13px;color:#334155}
  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
  @media(max-width:820px){.row{flex-direction:column;align-items:flex-start}}
</style>
</head>
<body>
<div class="wrap" role="main">
  <header>
    <div class="brand">
      <div class="logo">MK</div>
      <div>
        <h1>Relat√≥rio Premium ‚Äî MindKey</h1>
        <div id="subtitle" class="meta">Relat√≥rio profundo de autoconhecimento</div>
      </div>
    </div>
    <div class="row">
      <button id="printBtn" class="btn-outline">Salvar / Imprimir (PDF)</button>
      <button id="copyAll" class="btn">Copiar resumo</button>
    </div>
  </header>

  <section id="intro" style="margin-top:16px">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="label">Nome do produto</div>
          <div style="font-weight:700;font-size:18px">MindKey ‚Äî Mapa de Tend√™ncias Comportamentais (Premium)</div>
          <div class="small">Relat√≥rio m√≠stico-cient√≠fico ‚Äî vers√£o detalhada</div>
        </div>
        <div style="text-align:right">
          <div class="label">Perfil principal</div>
          <div id="profileMain" style="font-weight:800;font-size:18px">--</div>
          <div id="profileSub" class="small">--</div>
        </div>
      </div>
    </div>
  </section>

  <!-- 1 PERFIS -->
  <details open>
    <summary>üî• 1. Perfis Base (DISC + Energia)</summary>
    <div style="margin-top:10px">
      <div class="grid-4">
        <div><div class="label">Domin√¢ncia</div><div id="barD">--</div></div>
        <div><div class="label">Influ√™ncia</div><div id="barI">--</div></div>
        <div><div class="label">Estabilidade</div><div id="barS">--</div></div>
        <div><div class="label">Conformidade</div><div id="barC">--</div></div>
      </div>

      <div style="margin-top:12px" id="percDesc" class="small">Descri√ß√£o gr√°fica do perfil</div>
    </div>
  </details>

  <!-- 2 Interpreta√ß√£o -->
  <details>
    <summary>üîÆ 2. Interpreta√ß√£o M√≠stica + Cient√≠fica</summary>
    <div style="margin-top:10px">
      <div id="archetype" style="font-weight:800;font-size:16px">O Desbravador Vision√°rio</div>
      <p id="archetypeDesc" class="small">Descri√ß√£o do arqu√©tipo ‚Äî combina√ß√£o de fogo e ar, etc.</p>
    </div>
  </details>

  <!-- 3 Pontos Fortes -->
  <details>
    <summary>üåü 3. Pontos Fortes</summary>
    <ul id="strengths"></ul>
  </details>

  <!-- 4 Pontos Cegos -->
  <details>
    <summary>‚ö†Ô∏è 4. Pontos Cegos</summary>
    <ul id="blindspots"></ul>
  </details>

  <!-- 5 Frases -->
  <details>
    <summary>‚ù§Ô∏è 5. Voc√™ em Frases</summary>
    <ul id="phrases"></ul>
  </details>

  <!-- 6 Decis√£o -->
  <details>
    <summary>üß† 6. Tomada de Decis√£o</summary>
    <div id="decisionDesc" class="small"></div>
  </details>

  <!-- 7 Press√£o -->
  <details>
    <summary>üí• 7. Comportamento sob Press√£o</summary>
    <div id="pressureDesc" class="small"></div>
  </details>

  <!-- 8 Areas -->
  <details>
    <summary>üß© 8. √Åreas da Vida (Trabalho / Amor / Amizades / etc.)</summary>
    <div style="margin-top:10px">
      <h4>Trabalho</h4><p id="workDesc" class="small"></p>
      <h4>Vida Amorosa</h4><p id="loveDesc" class="small"></p>
      <h4>Amizades</h4><p id="friendsDesc" class="small"></p>
      <h4>Conflitos</h4><p id="conflictDesc" class="small"></p>
      <h4>Lideran√ßa</h4><p id="leadDesc" class="small"></p>
      <h4>Aprendizagem</h4><p id="learnDesc" class="small"></p>
    </div>
  </details>

  <!-- 9 Mapa Social -->
  <details>
    <summary>üåå 9. Mapa Social ‚Äî quem combina & quem entra em conflito</summary>
    <div style="margin-top:10px">
      <p id="socialMap" class="small"></p>
    </div>
  </details>

  <!-- 10 Motivadores -->
  <details>
    <summary>üöÄ 10. Motivadores</summary>
    <ul id="motivators"></ul>
  </details>

  <!-- 11 Gatilhos -->
  <details>
    <summary>üß® 11. Gatilhos Emocionais Negativos</summary>
    <ul id="triggers"></ul>
  </details>

  <!-- 12 Plano -->
  <details>
    <summary>üéØ 12. Plano de Evolu√ß√£o (passos pr√°ticos)</summary>
    <ul id="plan"></ul>
  </details>

  <!-- 13 Guia de Comunica√ß√£o -->
  <details>
    <summary>üîµ 13. Guia de Comunica√ß√£o (como falar com esta pessoa)</summary>
    <div id="commGuide" class="small"></div>
  </details>

  <!-- 14 Narrativa -->
  <details>
    <summary>üßø 14. Narrativa Profunda</summary>
    <p id="narrative" class="small"></p>
  </details>

  <!-- PROMPTS -->
  <details>
    <summary>ü§ñ 16. Prompt para IA (B√ÅSICO)</summary>
    <div class="code" id="promptBasic"></div>
    <div class="actions">
      <button id="copyBasic" class="btn">Copiar Prompt B√°sico</button>
      <button id="openChatBasic" class="btn-outline">Abrir no ChatGPT (nova aba)</button>
    </div>
  </details>

  <details>
    <summary>ü§ñ 17. Prompt para IA (AVAN√áADO)</summary>
    <div class="code" id="promptAdvanced"></div>
    <div class="actions">
      <button id="copyAdv" class="btn">Copiar Prompt Avan√ßado</button>
      <button id="openChatAdv" class="btn-outline">Abrir no ChatGPT (nova aba)</button>
    </div>
  </details>

  <footer>
    <div class="small" style="margin-top:18px">MindKey ‚Äî Mapa de Tend√™ncias Comportamentais (vers√£o demo). Esta ferramenta n√£o substitui avalia√ß√£o profissional.</div>
  </footer>
</div>

<script>
/*
  relatorio_premium.html
  - l√™ query params (primary, counts) para preencher automaticamente
  - se n√£o houver params, usa exemplo demo
  - oferece copiar prompts e abrir no ChatGPT (prepara URL com prompt)
  - bot√£o imprimir usa window.print()
*/

/* UTIL: ler query string */
function qs() {
  const p = {};
  location.search.slice(1).split('&').forEach(s=>{
    if(!s) return;
    const [k,v] = s.split('=').map(decodeURIComponent);
    p[k]=v;
  });
  return p;
}

/* DADOS PADR√ÉO (exemplo se n√£o passar params) */
const demo = {
  primaryLabel: "Vision√°rio (Domin√¢ncia alta)",
  secondaryLabel: "Influente (moderado)",
  counts: {A:8,B:5,C:4,D:3},
  archetype: "O Desbravador Vision√°rio",
  archetypeDesc: "Vis√£o, iniciativa e foco em impacto. Fogo + Ar. Transforma caos em movimento.",
  strengths: [
    "Coragem decisional ‚Äî age antes de esperar consenso",
    "Lideran√ßa instintiva ‚Äî pessoas te seguem pela clareza",
    "Alta toler√¢ncia a risco calculado",
    "Vis√£o estrat√©gica e velocidade mental"
  ],
  blindspots: [
    "Impaci√™ncia que gera atritos",
    "Dificuldade em delegar com confian√ßa",
    "Tend√™ncia a sobrecarregar-se",
    "Comunica√ß√£o direta demais em contextos sens√≠veis"
  ],
  phrases: [
    "Resolvo em minutos o que demora dias",
    "O que me irrita √© falta de clareza",
    "Meu radar √© encontrar oportunidades"
  ],
  decision: "R√°pida, com √™nfase em resultado. Prefere op√ß√µes diretas com pr√≥s/cons.",
  pressure: "Aumenta intensidade, foca em solu√ß√µes e corta o desnecess√°rio.",
  work: "Brilha com metas claras, autonomia e press√£o positiva.",
  love: "Ama em a√ß√µes; precisa de parceria forte e que respeite seu ritmo.",
  friends: "Poucos, profundos e leais. Prefere qualidade a quantidade.",
  conflict: "Enfrenta, corta ambiguidade e busca solu√ß√£o imediata.",
  lead: "L√≠der vision√°rio, exige resultados, inspira por exemplo.",
  learn: "Aprende fazendo; prefere experimenta√ß√£o.",
  socialMap: "Combina com perfis est√°veis e organizados; conflito com indecisos ou excessivamente emocionais.",
  motivators: ["Liberdade","Desafio","Autonomia","Impacto"],
  triggers: ["Lentid√£o","Burocracia","Falta de clareza"],
  plan: [
    "Delegue 1 tarefa por semana com instru√ß√µes claras",
    "Pratique 5 min de pausa antes de decis√µes grandes",
    "Pe√ßa feedback estruturado (1 pergunta por vez)"
  ],
  narrative: "Voc√™ transforma realidade com presen√ßa e a√ß√£o ‚Äî n√£o segue, abre caminhos."
};

/* monta prompt b√°sico e avan√ßado (texto enriquecido) */
function makePrompts(primaryLabel, explanation, countsObj){
  const basic = `You are an assistant helping a person with the following behavioral profile:
- Primary: ${primaryLabel}
- Key traits: ${explanation}
- Quick data: ${JSON.stringify(countsObj)}

Communication preferences: short answers, clear logic, actionable steps, no fluff.
When giving guidance, adapt to this person‚Äôs energy: bold, objective, strategic, high-tempo.

When asked, provide:
1) What they are feeling;
2) What likely motivated the other person;
3) A ready-to-say sentence the user can use;
4) A single practical action to do now.

Situation: [descreva aqui]`;
  const adv = `ACT AS: Personalized assistant for a user with the following deep profile:
ARCHETYPE: ${primaryLabel} / ${explanation}
TRAITS: decisive; strategic; fast-thinking; action-oriented; low tolerance for inefficiency.

COMMUNICATION RULES:
- Bullet points or 1-3 step actions only.
- No superfluous text; be direct.
- Present options with pros/cons.
- Provide a 1-line script the user can say.

Example output format:
- Feeling:
- Motivation of other:
- Script:
- Action (1 step):

Now respond to: [descreva a situa√ß√£o]`;

  return {basic, adv};
}

/* preenche a tela com dados */
function fillAll(data){
  document.getElementById('profileMain').textContent = data.primaryLabel || '‚Äî';
  document.getElementById('profileSub').textContent = data.secondaryLabel ? ('Secund√°rio: ' + data.secondaryLabel) : '';
  document.getElementById('barD').textContent = 'Domin√¢ncia: ' + (data.counts?.A ?? '-') + ' pts';
  document.getElementById('barI').textContent = 'Influ√™ncia: ' + (data.counts?.B ?? '-');
  document.getElementById('barS').textContent = 'Estabilidade: ' + (data.counts?.C ?? '-');
  document.getElementById('barC').textContent = 'Conformidade: ' + (data.counts?.D ?? '-');
  const percDesc = `Vis√£o: Domin√¢ncia alto; Influ√™ncia moderada; Estabilidade baixa; Conformidade baixa. Breakdown: ${JSON.stringify(data.counts||{})}`;
  document.getElementById('percDesc').textContent = percDesc;

  document.getElementById('archetype').textContent = data.archetype || '';
  document.getElementById('archetypeDesc').textContent = data.archetypeDesc || '';

  // arrays
  const fillList = (id, arr) => {
    const el = document.getElementById(id);
    el.innerHTML = '';
    (arr||[]).forEach(it=>{
      const li = document.createElement('li');
      li.textContent = it;
      el.appendChild(li);
    });
  };
  fillList('strengths', data.strengths || []);
  fillList('blindspots', data.blindspots || []);
  fillList('phrases', data.phrases || []);
  fillList('motivators', data.motivators || []);
  fillList('triggers', data.triggers || []);
  fillList('plan', data.plan || []);

  document.getElementById('decisionDesc').textContent = data.decision || '';
  document.getElementById('pressureDesc').textContent = data.pressure || '';
  document.getElementById('workDesc').textContent = data.work || '';
  document.getElementById('loveDesc').textContent = data.love || '';
  document.getElementById('friendsDesc').textContent = data.friends || '';
  document.getElementById('conflictDesc').textContent = data.conflict || '';
  document.getElementById('leadDesc').textContent = data.lead || '';
  document.getElementById('learnDesc').textContent = data.learn || '';
  document.getElementById('socialMap').textContent = data.socialMap || '';
  document.getElementById('commGuide').textContent = data.commGuide || (data.primaryLabel + ' prefere: clareza, objetivo e passo a passo.');
  document.getElementById('narrative').textContent = data.narrative || '';

  // prompts
  const {basic, adv} = makePrompts(data.primaryLabel || '‚Äî', data.archetypeDesc||'', data.counts||{});
  document.getElementById('promptBasic').textContent = basic;
  document.getElementById('promptAdvanced').textContent = adv;
}

/* MAIN: read qs, parse counts if present */
(function(){
  const params = qs();
  // expected params (optional): primary, secondary, counts (JSON encoded)
  let payload = null;
  if(params.primary){
    // try parse counts if provided as counts=A,B,C,D or countsJson
    const counts = {};
    if(params.countsJson){
      try{ Object.assign(counts, JSON.parse(params.countsJson)); }catch(e){}
    } else if(params.counts){
      // counts format A:8,B:5,C:4,D:3 or 8,5,4,3
      const c = params.counts.split(',');
      if(c.length===4){
        counts.A = Number(c[0]); counts.B = Number(c[1]); counts.C = Number(c[2]); counts.D = Number(c[3]);
      } else {
        // try key:value
        params.counts.split(';').forEach(pair=>{
          const [k,v]=pair.split(':');
          if(k && v) counts[k]=Number(v);
        });
      }
    }
    payload = {
      primaryLabel: params.primary,
      secondaryLabel: params.secondary || '',
      counts: (Object.keys(counts).length?counts:demo.counts),
      archetype: params.archetype || demo.archetype,
      archetypeDesc: params.archetypeDesc || demo.archetypeDesc,
      strengths: params.strengths ? params.strengths.split('|') : demo.strengths,
      blindspots: params.blindspots ? params.blindspots.split('|') : demo.blindspots,
      phrases: params.phrases ? params.phrases.split('|') : demo.phrases,
      decision: params.decision || demo.decision,
      pressure: params.pressure || demo.pressure,
      work: params.work || demo.work,
      love: params.love || demo.love,
      friends: params.friends || demo.friends,
      conflict: params.conflict || demo.conflict,
      lead: params.lead || demo.lead,
      learn: params.learn || demo.learn,
      socialMap: params.socialMap || demo.socialMap,
      motivators: params.motivators ? params.motivators.split('|') : demo.motivators,
      triggers: params.triggers ? params.triggers.split('|') : demo.triggers,
      plan: params.plan ? params.plan.split('|') : demo.plan,
      narrative: params.narrative || demo.narrative,
      commGuide: params.commGuide || ''
    };
  } else {
    payload = demo; // fallback demo
  }

  // fill UI
  fillAll(payload);

  // copy buttons
  document.getElementById('copyBasic').addEventListener('click', ()=>{
    const txt = document.getElementById('promptBasic').textContent || '';
    navigator.clipboard?.writeText(txt).then(()=>alert('Prompt b√°sico copiado!')).catch(()=>alert('Copiar falhou ‚Äî selecione e copie manualmente.'));
  });
  document.getElementById('copyAdv').addEventListener('click', ()=>{
    const txt = document.getElementById('promptAdvanced').textContent || '';
    navigator.clipboard?.writeText(txt).then(()=>alert('Prompt avan√ßado copiado!')).catch(()=>alert('Copiar falhou ‚Äî selecione e copie manualmente.'));
  });

  document.getElementById('printBtn').addEventListener('click', ()=> window.print());
  document.getElementById('copyAll').addEventListener('click', ()=>{
    // copy a short summary
    const summary = `${payload.primaryLabel} ‚Äî ${payload.archetype}\n${payload.archetypeDesc}\nFor√ßas: ${payload.strengths.join(', ')}\nPontos a melhorar: ${payload.blindspots.join(', ')}\nPlano: ${payload.plan.join(' | ')}`;
    navigator.clipboard?.writeText(summary).then(()=>alert('Resumo copiado!')).catch(()=>alert('Falha ao copiar resumo.'));
  });

  // open ChatGPT with prompt helper (construct url to chat.openai.com/chat if possible)
  function openChatWith(prompt){
    // We'll open a new tab to ChatGPT with the prompt in query if desired ‚Äî but ChatGPT doesn't support prefilled prompt via url reliably.
    // Safer: open a new window with a data:text/plain showing the prompt so user can copy quickly.
    const w = window.open('', '_blank');
    w.document.write(`<pre style="white-space:pre-wrap;font-family:monospace;padding:20px">${escapeHtml(prompt)}</pre>`);
    w.document.title = 'Prompt ‚Äî Copie e cole no ChatGPT';
  }
  document.getElementById('openChatBasic').addEventListener('click', ()=>{
    openChatWith(document.getElementById('promptBasic').textContent||'');
  });
  document.getElementById('openChatAdv').addEventListener('click', ()=>{
    openChatWith(document.getElementById('promptAdvanced').textContent||'');
  });

  function escapeHtml(s){ return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
})();
</script>
</body>
</html>
